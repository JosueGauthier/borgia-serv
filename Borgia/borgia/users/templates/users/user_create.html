{% extends 'base_sober.html' %}
{% load bootstrap %}

{% block content %}
<div class="panel panel-default">
    <div class="panel-heading">
        Ajout d'un utilisateur
    </div>
    <div class="panel-body">
        <form action="" method="post">
            {% csrf_token %}
            {{ form|bootstrap }}
            <button class="btn btn-success" type="submit">Ajouter</button>
        </form>
    </div>
</div>
<script>
  $("#id_family").change(function() {
    update_username()
  })
  $("#id_campus").change(function() {
    update_username()
  })
  $("#id_year").change(function() {
    update_username()
  })
  String.prototype.capitalize = function() {
    return this.charAt(0).toUpperCase() + this.slice(1);
  }
  function update_username() {
    var username = ""
    username = (
      $("#id_family").val()
      + $("#id_campus").val().toLowerCase().capitalize()
      + $("#id_year").val().slice(0, 1) + $("#id_year").val().slice(2, 4))
    $("#id_username").val(username)
  }
</script>
{% endblock %}
